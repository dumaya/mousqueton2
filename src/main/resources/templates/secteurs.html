<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8" />
    <title>Mousqueton</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />
    <link th:href="@{css/mousqueton.css}"  rel="stylesheet" />
  </head>
  <body>
    <div class="container container-fluid">
      <nav class="navbar navbar-default navbar-static-top">
          <ul class="nav navbar-nav">
            <li> <a href="index">Accueil</a> </li>
            <li class="active"> <a href="sites">Liste des Sites</a> </li>
            <li> <a href="recherchersite">Rechercher un Site</a> </li>
            <li> <a href="topos">Topos</a> </li>
            <li> <a href="mestopos">Mes topos</a> </li>
          </ul>
      </nav>

       <header class="page-header">
           <div class="row">
               <div class="col-sm-2"><h1>Site :</h1></div>
               <div class="col-sm-offset-8 col-sm-2">
                   <span th:if="${site.isOfficielAmiEscalade()} == true">
                       <img th:src="@{images/ami.png}" alt="Officiel les amis de l'escalade" />
                   </span>
               </div>
           </div>
      </header>
        <section class="col-sm-offset-1 col-sm-10">
        <table class="table table-striped table-bordered table-responsive">
            <tr> <th>Nom</th> <td th:utext="${site.nom}"></td> </tr>
            <tr> <th>Description</th> <td th:utext="${site.description}"></td> </tr>
            <tr> <th>Lieu</th> <td th:utext="${site.lieu}"></td> </tr>
            <tr> <th>Cotations</th> <td th:utext="'Min:' + ${site.cotationMin} + ' Max:' + ${site.cotationMax}"></td> </tr>
            <tr> <th>Type Roche</th> <td th:utext="${site.typeRoche}"></td> </tr>
            <tr> <th>Ancrage</th> <td th:utext="${site.ancrage}"></td> </tr>
            <tr> <th>Relais</th> <td th:utext="${site.relais}"></td> </tr>
            <tr> <th>Altitude</th> <td th:utext="${site.altitude}"></td> </tr>
            <tr> <th>Orientation</th> <td th:utext="${site.orientation}"></td> </tr>
            <tr> <th>Date de MAJ</th> <td th:utext="${site.dateMaj}"></td> </tr>
        </table>
        <h2>Secteurs :</h2>
        <table class="table table-striped table-bordered">
            <tr>
                <th>Nom</th>
                <th>Description</th>
                <th>Date de mise à jour</th>
                <th>Détails du secteur</th>
            </tr>
            <tr th:each ="secteur : ${site.getSecteurs()}">
                <td th:utext="${secteur.nom}">...</td>
                <td th:utext="${secteur.description}">...</td>
                <td th:utext="${secteur.dateMaj}">...</td>
                <td>
                    <a th:href="@{/voies(idSite=${site.id},idSecteur=${secteur.id})}">
                        <input type="hidden"  th:value="${site.id}" name="idSite"/>
                        <input type="hidden"  th:value="${secteur.id}" name="idSecteur"/>
                        <button type="submit" class="btn btn-success">Voir</button>
                    </a>
                </td>
            </tr>
         </table>
            <div class="btn-group">
                <a th:href="@{/ajoutsecteur(idSite=${site.id})}" class="btn btn-primary active">Ajouter un secteur à ce site</a>
            </div>
            <span th:if="${ami} == true">
                <span th:if="${site.isOfficielAmiEscalade()} == false">
                    <form data-toggle="validator" role="form" th:object="${site}" th:action="@{/secteurs/modifAmi}" method="post">
                        <input type="hidden"  th:value="${site.id}" name="idSite"/>
                        <button type="submit" class="btn btn-secondary">Rendre ce site Officiel "Les amis de l'escalade"</button>
                    </form>
                </span>
                <span th:if="${site.isOfficielAmiEscalade()} == true">
                    <form data-toggle="validator" role="form" th:object="${site}" th:action="@{/secteurs/modifAmi}" method="post">
                        <input type="hidden"  th:value="${site.id}" name="idSite"/>
                        <button type="submit" class="btn btn-secondary">Invalider ce site "Les amis de l'escalade"</button>
                    </form>
                </span>
            </span>
        </section>
    <footer>
        <div class="container">
            <!-- this is footer -->
            © 2019 dumaya.dev
            <div th:if="${user != null}">
                Utilisateur connecté: <span th:text="${user.getEmail()}"></span>
                | Roles: <div th:each ="role : ${roles}" th:utext="${role.getRole()} + ' '" th:remove="tag"></div>
                | <a th:href="@{/logout}">Se deconnecter</a>
            </div>
            <div th:if="${user == null}">
                <a th:href="@{/login}">Se connecter</a>
            </div>
        </div>
    </footer>
    </div>
  </body>
</html>

